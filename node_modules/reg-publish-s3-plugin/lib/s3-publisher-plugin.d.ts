import { ObjectCannedACL, S3ClientConfig, ServerSideEncryption } from "@aws-sdk/client-s3";
import { PublisherPlugin, PluginCreateOptions, WorkingDirectoryInfo } from "reg-suit-interface";
import { FileItem, RemoteFileItem, ObjectListResult, AbstractPublisher } from "reg-suit-util";
export interface PluginConfig {
    bucketName: string;
    pattern?: string;
    enableACL?: boolean;
    acl?: ObjectCannedACL;
    sse?: boolean | ServerSideEncryption;
    sseKMSKeyId?: string;
    customDomain?: string;
    pathPrefix?: string;
    sdkOptions?: S3ClientConfig;
}
export declare class S3PublisherPlugin extends AbstractPublisher implements PublisherPlugin<PluginConfig> {
    name: string;
    private _options;
    private _pluginConfig;
    private _s3client;
    constructor();
    init(config: PluginCreateOptions<PluginConfig>): void;
    publish(key: string): Promise<{
        reportUrl: string | undefined;
    }>;
    fetch(key: string): Promise<any>;
    protected getBucketDomain(): string;
    protected getBucketRootDir(): string | undefined;
    protected getBucketName(): string;
    protected getLocalGlobPattern(): string | undefined;
    protected getWorkingDirs(): WorkingDirectoryInfo;
    protected uploadItem(key: string, item: FileItem): Promise<FileItem>;
    protected downloadItem(remoteItem: RemoteFileItem, item: FileItem): Promise<FileItem>;
    protected listItems(lastKey: string, prefix: string): Promise<ObjectListResult>;
    private _gunzipIfNeed;
}
